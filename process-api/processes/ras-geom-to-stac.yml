---
info:
  version: 2024.2.17
  id: ras-geom-to-stac
  title: STAC Item Generation (RAS GEOM HDF)
  description: Creates a new stac item from a HEC-RAS geometry HDF file
  outputTransmission: 
  jobControlOptions:
    - sync-execute

host:
  type: local
container:
  image: public.ecr.aws/s7t2t0q0/ras-stac:latest
  command:
    - python
    - "-m"
    - new_ras_geom
  envVars:
    - AWS_ACCESS_KEY_ID
    - AWS_SECRET_ACCESS_KEY
    - AWS_REGION
  maxResources:
    cpus: 0.1
    memory: 256

inputs:
- id: geom_hdf
  title: RAS Geometry HDF
  description: Full S3 path to the HEC-RAS geometry HDF file (i.e. s3://bucket/key/geom.hdf)
  input:
    literalDataDomain:
      dataType: string
      valueDefinition:
        anyValue: true
  minOccurs: 1
  maxOccurs: 1

- id: new_item_s3_key
  title: STAC Item S3 Key
  description: Full S3 path to STAC item for geom_hdf. Prefix must begin with `stac/`
    (i.e. s3://bucket/stac/geom.hdf.json)
  input:
    literalDataDomain:
      dataType: string
      valueDefinition:
        anyValue: true
  minOccurs: 1
  maxOccurs: 1

- id: topo_assets
  title: Topographic Assets
  description: Topo datasets used in the creation of the geom_hdf (i.e. [s3://bucket/stac/topo.tif])
  input:
    literalDataDomain:
      dataType: list
      valueDefinition:
        anyValue: true
  minOccurs: 0
  maxOccurs: 5

- id: lulc_assets
  title: Landuse Land cover Assets
  description: Landuse datasets used in the creation of the geom_hdf (i.e. [s3://bucket/stac/infiltration.hdf])
  input:
    literalDataDomain:
      dataType: list
      valueDefinition:
        anyValue: true
  minOccurs: 0
  maxOccurs: 5

- id: mannings_assets
  title: Mannings Assets
  description: Friction datasets used in the creation of the geom_hdf (i.e. [s3://bucket/stac/mannings.tif])
  input:
    literalDataDomain:
      dataType: list
      valueDefinition:
        anyValue: true
  minOccurs: 0
  maxOccurs: 5

- id: other_assets
  title: Additiona Assets
  description: Any other datasets used in the creation of the geom_hdf (i.e. [s3://bucket/stac/other.tif])
  input:
    literalDataDomain:
      dataType: list
      valueDefinition:
        anyValue: true
  minOccurs: 0
  maxOccurs: 5

- id: simplify
  title: Simplify Polygon Threshold
  description: Target threshold for simplifying the geometry created as the Item geojson.
    If not provided, default is 100.
  input:
    literalDataDomain:
      dataType: integer
      valueDefinition:
        anyValue: true
  minOccurs: 0
  maxOccurs: 1

outputs:
- id: results
  title: results
  description: 
  output:
    transmissionMode:
    - value
